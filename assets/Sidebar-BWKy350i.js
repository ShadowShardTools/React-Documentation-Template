import{c as C,r as l,j as t}from"./index-BPy2T0rv.js";import{S as Z,C as A}from"./search-8MnqbhJS.js";/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],H=C("chevron-right",O);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],k=C("file-text",P);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],T=C("folder",X),Q=({items:$,categories:E,subcategories:q,onSelect:d,selectedItem:m,initiallyVisible:z=!0})=>{var S,D;const[I]=l.useState(z),[b,G]=l.useState({}),[y,K]=l.useState({}),[g,U]=l.useState(""),[j,w]=l.useState(0),c=l.useRef([]),p=l.useRef(null),M=e=>G(s=>({...s,[e]:!s[e]})),_=e=>K(s=>({...s,[e]:!s[e]})),N=e=>(m==null?void 0:m.id)===e.id,V=g.toLowerCase(),i={},v=[];for(const e of $){if(!e.title.toLowerCase().includes(V))continue;const s=(S=e.category)==null?void 0:S.id,a=(D=e.subcategory)==null?void 0:D.id;if(!s||!E[s])v.push(e);else{i[s]||(i[s]={});const r=a&&q[a]?a:"_no_sub";i[s][r]||(i[s][r]=[]),i[s][r].push(e)}}return c.current=[],l.useEffect(()=>{const e=c.current;j>=e.length&&w(Math.max(0,e.length-1))},[g,b,y]),l.useEffect(()=>{const e=s=>{var F,L,R;const a=document.activeElement,r=(a==null?void 0:a.tagName)==="INPUT"||(a==null?void 0:a.tagName)==="TEXTAREA",n=c.current;if(s.code==="KeyF"&&!r){s.preventDefault(),(F=p.current)==null||F.focus();return}if(s.key==="Escape"&&a===p.current){s.preventDefault(),(L=p.current)==null||L.blur();return}if(!I||r)return;const h=n.length-1;if(s.key==="ArrowDown")s.preventDefault(),w(o=>{var x,f;const u=Math.min(o+1,h);return(f=(x=n[u])==null?void 0:x.ref)==null||f.focus(),u});else if(s.key==="ArrowUp")s.preventDefault(),w(o=>{var x,f;const u=Math.max(o-1,0);return(f=(x=n[u])==null?void 0:x.ref)==null||f.focus(),u});else if(s.key==="Enter"){s.preventDefault();const o=(R=n[j])==null?void 0:R.entry;if(!o)return;o.type==="doc"&&o.item?d(o.item):o.type==="category"&&o.id?M(o.id):o.type==="subcategory"&&o.id&&_(o.id)}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[j,I,d]),t.jsx(t.Fragment,{children:t.jsxs("aside",{className:"fixed md:sticky top-16 bottom-0 md:top-16 md:h-[calc(100vh-4rem)] w-64 shrink-0 border-r border-gray-200 p-4 overflow-y-auto custom-scrollbar bg-white z-40",children:[t.jsxs("div",{className:"mb-4 relative",children:[t.jsx(Z,{className:"absolute left-2.5 top-2.5 w-4 h-4 text-gray-400"}),t.jsx("input",{ref:p,type:"text",value:g,onChange:e=>U(e.target.value),placeholder:"Enter here to filter...",className:"w-full pl-8 pr-2 py-1.5 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),t.jsx("kbd",{className:"absolute right-2.5 top-1/2 -translate-y-1/2 px-1.5 py-0.5 text-xs font-semibold text-gray-500 border border-gray-300 rounded bg-white pointer-events-none",children:"F"})]}),t.jsxs("nav",{className:"space-y-4",children:[v.length>0&&t.jsxs("div",{children:[t.jsx("h2",{className:"text-sm font-semibold text-gray-500 uppercase mb-2",children:"General"}),t.jsx("ul",{className:"space-y-1",children:v.map(e=>t.jsxs("li",{tabIndex:0,ref:s=>{s&&c.current.push({ref:s,entry:{type:"doc",item:e}})},className:`flex items-center gap-2 cursor-pointer rounded px-2 py-1 ${N(e)?"bg-blue-100 text-blue-700 font-semibold border-2 border-blue-500":"text-gray-700 hover:text-blue-600"}`,onClick:()=>d(e),children:[t.jsx(k,{className:"w-4 h-4"}),t.jsx("span",{children:e.title})]},e.id))})]}),Object.values(E).map(e=>{var a;const s=i[e.id];return s?t.jsxs("div",{children:[t.jsxs("button",{tabIndex:0,ref:r=>{r&&c.current.push({ref:r,entry:{type:"category",id:e.id}})},className:"flex items-center justify-between w-full text-left text-gray-800 font-medium hover:text-blue-600 px-2 py-1",onClick:()=>M(e.id),children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(T,{className:"w-4 h-4"}),t.jsx("span",{children:e.title})]}),b[e.id]?t.jsx(A,{className:"w-4 h-4"}):t.jsx(H,{className:"w-4 h-4"})]}),b[e.id]&&t.jsxs("div",{className:"ml-5 mt-2 space-y-2",children:[(a=s._no_sub)==null?void 0:a.map(r=>t.jsxs("li",{tabIndex:0,ref:n=>{n&&c.current.push({ref:n,entry:{type:"doc",item:r}})},className:`flex items-center gap-2 cursor-pointer rounded px-2 py-1 ${N(r)?"bg-blue-100 text-blue-700 font-semibold border-2 border-blue-500":"text-gray-600 hover:text-blue-600"}`,onClick:()=>d(r),children:[t.jsx(k,{className:"w-4 h-4"}),t.jsx("span",{children:r.title})]},r.id)),(e.subcategories||[]).map(r=>!r||!s[r.id]?null:t.jsxs("div",{children:[t.jsxs("button",{tabIndex:0,ref:n=>{n&&c.current.push({ref:n,entry:{type:"subcategory",id:r.id}})},className:"flex items-center justify-between w-full text-left text-gray-700 hover:text-blue-600 px-2 py-1",onClick:()=>_(r.id),children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(T,{className:"w-4 h-4"}),t.jsx("span",{children:r.title})]}),y[r.id]?t.jsx(A,{className:"w-4 h-4"}):t.jsx(H,{className:"w-4 h-4"})]}),y[r.id]&&t.jsx("ul",{className:"ml-4 mt-1 space-y-1",children:s[r.id].map(n=>t.jsxs("li",{tabIndex:0,ref:h=>{h&&c.current.push({ref:h,entry:{type:"doc",item:n}})},className:`flex items-center gap-2 cursor-pointer rounded px-2 py-1 ${N(n)?"bg-blue-100 text-blue-700 font-semibold border-2 border-blue-500":"text-gray-600 hover:text-blue-600"}`,onClick:()=>d(n),children:[t.jsx(k,{className:"w-4 h-4"}),t.jsx("span",{children:n.title})]},n.id))})]},r.id))]})]},e.id):null})]})]})})};export{Q as default};
